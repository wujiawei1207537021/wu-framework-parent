"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[368],{8338:function(e,a,l){l.r(a),l.d(a,{default:function(){return h}});var t=l(66252),u=l(2262),m=l(3577);const n=(0,t._)("h4",null,"表对应的实体",-1),i={style:{"white-space":"pre-wrap"}},o=(0,t._)("h4",null,"实体对应xml",-1),s={style:{"white-space":"pre-wrap"}},d=(0,t._)("h4",null,"表对应的控制层",-1),c={style:{"white-space":"pre-wrap"}},v=(0,t._)("h4",null,"表对应的业务接口",-1),w={style:{"white-space":"pre-wrap"}},r=(0,t._)("h4",null,"表对应的业务接口实现",-1),p={style:{"white-space":"pre-wrap"}};var h={__name:"DatabaseTableJavaCode",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:a}){const l=e,h=a,{title:b,rowData:_}=(0,u.BK)(l),g=(0,u.iH)(["swagger"]),f=["swagger","mybatis","lazy","Shenzhen"],y=(0,u.iH)({}),W=()=>{h("closeDialog",!1)},k=(0,u.iH)(null),D=(0,u.qj)({id:"",schemaName:"",schemaNameId:"",instanceName:"",instanceId:"",engine:"",autoIncrement:"",tableComment:"",tableName:"",tableCatalog:"",tableRows:"",tableCollation:"",maxDataLength:"",indexLength:"",dataLength:"",avgRowLength:"",createOptions:"",checkTime:"",checksum:"",dataFree:"",rowFormat:"",tableType:"",createTime:"",updateTime:"",version:""}),{id:z,schemaName:N,schemaNameId:C,instanceName:I,instanceId:T,engine:U,autoIncrement:L,tableComment:x,tableName:j,tableCatalog:V,tableRows:E,tableCollation:F,maxDataLength:H,indexLength:R,dataLength:A,avgRowLength:S,createOptions:K,checkTime:O,checksum:P,dataFree:B,rowFormat:J,tableType:M,createTime:Y,updateTime:q,version:X}=(0,u.BK)(D),G=(0,u.iH)(null);_.value&&(N.value=_.value.schemaName,z.value=_.value.id,C.value=_.value.schemaNameId,I.value=_.value.instanceName,T.value=_.value.instanceId,U.value=_.value.engine,L.value=_.value.autoIncrement,x.value=_.value.tableComment,j.value=_.value.tableName,V.value=_.value.tableCatalog,E.value=_.value.tableRows,F.value=_.value.tableCollation,H.value=_.value.maxDataLength,R.value=_.value.indexLength,A.value=_.value.dataLength,S.value=_.value.avgRowLength,K.value=_.value.createOptions,O.value=_.value.checkTime,P.value=_.value.checksum,B.value=_.value.dataFree,J.value=_.value.rowFormat,M.value=_.value.tableType,Y.value=_.value.createTime,q.value=_.value.updateTime,X.value=_.value.version);return(0,t.bv)((async()=>{VE_API.system.generateJavaModel({id:_.value.id}).then((e=>{const{code:a}=e;console.log(a),0===a&&(y.value=e.data)})),await(async e=>{let a=await VE_API.system.databaseTablesColumnList({tableIds:e});const{code:l}=a;0===l&&(a.data.map((e=>{e.label=e.columnName,e.value=e.columnName})),G.value=a.data?a.data:[])})(_.value.id)})),(a,l)=>{const h=(0,t.up)("el-descriptions-item"),z=(0,t.up)("el-tag"),N=(0,t.up)("el-descriptions"),C=(0,t.up)("el-divider"),I=(0,t.up)("el-checkbox"),T=(0,t.up)("el-checkbox-group"),U=(0,t.up)("el-card"),L=(0,t.up)("el-timeline-item"),x=(0,t.up)("el-timeline"),j=(0,t.up)("el-button"),V=(0,t.up)("el-drawer");return(0,t.wg)(),(0,t.j4)(V,{title:(0,u.SU)(b),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:l[3]||(l[3]=e=>W())},{footer:(0,t.w5)((()=>[(0,t._)("span",null,[(0,t.Wm)(j,{onClick:l[1]||(l[1]=e=>W())},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(j,{type:"primary",onClick:l[2]||(l[2]=e=>{k.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;e="添加"===b.value?await VE_API.system.schemaAdd(D):await VE_API.system.schemaEdit({id:_.value.id,...D});const{code:a}=e;"00"===a&&W()}}))})},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(N,{class:"margin-top",column:3,border:"",title:"表详情"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"id",property:"id",class:"contentClassName"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.id),1)])),_:1}),(0,t.Wm)(h,{label:"数据库服务器ID"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{size:"small"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.instanceId),1)])),_:1})])),_:1}),(0,t.Wm)(h,{label:"数据库服务器名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{size:"small"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.instanceName),1)])),_:1})])),_:1}),(0,t.Wm)(h,{label:"数据库名称"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.schemaName),1)])),_:1}),(0,t.Wm)(h,{label:"数据库ID"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.schemaNameId),1)])),_:1}),(0,t.Wm)(h,{label:"表引擎"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.engine),1)])),_:1}),(0,t.Wm)(h,{label:"表名称"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.tableName),1)])),_:1}),(0,t.Wm)(h,{label:"表名描述"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(this.rowData.tableComment),1)])),_:1})])),_:1}),(0,t.Wm)(N,{border:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"表字段"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(G.value,((e,a)=>((0,t.wg)(),(0,t.iD)("span",{key:a},[(0,t.Uk)((0,m.zw)(e.columnName)+" ",1),(0,t.Wm)(C,{direction:"vertical"})])))),128))])),_:1})])),_:1}),(0,t.Wm)(T,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),min:1,max:2},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(f,(e=>(0,t.Wm)(I,{key:e,label:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,m.zw)(e),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"]),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(L,{timestamp:"实体",placement:"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[n,(0,t._)("p",i,(0,m.zw)(y.value.javaEntity),1)])),_:1})])),_:1}),(0,t.Wm)(L,{timestamp:"实体对应xml",placement:"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[o,(0,t._)("p",s,(0,m.zw)(y.value.javaMapperXml),1)])),_:1})])),_:1}),(0,t.Wm)(L,{timestamp:"控制层",placement:"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[d,(0,t._)("p",c,(0,m.zw)(y.value.javaController),1)])),_:1})])),_:1}),(0,t.Wm)(L,{timestamp:"业务接口",placement:"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[v,(0,t._)("p",w,(0,m.zw)(y.value.javaService),1)])),_:1})])),_:1}),(0,t.Wm)(L,{timestamp:"业务接口实现",placement:"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[r,(0,t._)("p",p,(0,m.zw)(y.value.javaServiceImpl),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title","model-value"])}}}}}]);