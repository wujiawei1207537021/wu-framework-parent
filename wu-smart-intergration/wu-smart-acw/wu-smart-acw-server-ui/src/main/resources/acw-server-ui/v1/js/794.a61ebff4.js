"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[794],{33343:function(e,l){l.Z={description:"自动生成代码客户端管理",type:"1",icon:"Lollipop",name:"自动生成代码客户端管理"}},40794:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(66252),u=a(2262),o=a(3577),d=a(33343);const n={style:{float:"left"}},r={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},m={style:{float:"left"}},i={style:{float:"right",color:"#8492a6","font-size":"13px"}},s={style:{float:"left"}},c={style:{float:"right",color:"#8492a6","font-size":"13px"}},p={data:()=>({description:"客户端生成code工厂",buttons:{generate:{name:"生成代码"}},type:"1",icon:"HotWater",name:"客户端生成code工厂",parentMenu:d.Z})};var b=Object.assign(p,{__name:"ClientGenerateFactory",setup(e){const l={instanceId:[{required:!0,message:"请输入数据库服务器",trigger:"blur"}],schema:[{required:!0,message:"请选择数据库库名",trigger:"blur"}],tableList:[{required:!0,message:"请选择数据库表",trigger:"blur"}],clientId:[{required:!0,message:"请选择客户端",trigger:"blur"}],absolutePath:[{required:!0,message:"请输入文件输出地址",trigger:"blur"}],packageName:[{required:!0,message:"请输入项目包名",trigger:"blur"}]},a=(0,u.iH)(null),d=(0,u.qj)({schema:"",instanceId:"",tableList:[],clientId:"",absolutePath:"",prefix:"",webArchitecture:"DDD_ARCHITECTURE",ormArchitecture:"LAZY",packageName:""}),{schema:p,instanceId:b,tableList:f,clientId:v,absolutePath:h,prefix:w,webArchitecture:g,ormArchitecture:_,packageName:V}=(0,u.BK)(d),W=(0,u.iH)([]),I=(0,u.iH)([]),y=(0,u.iH)([]),A=(0,u.iH)([]),k=(0,u.iH)([]);(0,t.bv)((async()=>{N(),P()}));const U=()=>{VE_API.system.tableList({instanceId:b.value,schemaName:p.value}).then((e=>{e.data&&(e.data.map((e=>{e.label=e.tableName,e.value=e.tableName})),y.value=e.data?e.data:[])}))},N=()=>{VE_API.system.databaseInstanceList().then((e=>{e.data.map((e=>{e.label=e.instanceName,e.value=e.id})),W.value=e.data?e.data:[]}))},P=()=>{VE_API.system.cloudClientFindList().then((e=>{e.data.map((e=>{e.label=e.clientId,e.value=e.clientId})),A.value=e.data?e.data:[]}))};return(e,N)=>{const P=(0,t.up)("el-option"),D=(0,t.up)("el-select"),q=(0,t.up)("el-form-item"),L=(0,t.up)("el-col"),C=(0,t.up)("el-row"),H=(0,t.up)("el-input"),E=(0,t.up)("el-form"),z=(0,t.up)("el-button");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(E,{model:d,ref_key:"formRef",ref:a,rules:l,"label-width":"80px",inline:!1},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{label:"数据库实例",prop:"instanceId"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(b),"onUpdate:modelValue":N[0]||(N[0]=e=>(0,u.dq)(b)?b.value=e:null),placeholder:"数据库实例",filterable:"",onChange:N[1]||(N[1]=e=>((e=null)=>{console.log(e),VE_API.system.schemaList({instanceId:b.value}).then((e=>{e.data.map((e=>{e.label=e.schemaName,e.value=e.schemaName})),I.value=e.data?e.data:[]}))})(e))},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(W.value,(e=>((0,t.wg)(),(0,t.j4)(P,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"数据库库名",prop:"schema"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(p),"onUpdate:modelValue":N[2]||(N[2]=e=>(0,u.dq)(p)?p.value=e:null),filterable:"",placeholder:"数据库实例",onChange:U},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(I.value,(e=>((0,t.wg)(),(0,t.j4)(P,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"表名称",prop:"tableList"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(f),"onUpdate:modelValue":N[3]||(N[3]=e=>(0,u.dq)(f)?f.value=e:null),placeholder:"表名称",filterable:"",multiple:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(y.value,(e=>((0,t.wg)(),(0,t.j4)(P,{key:e.value,label:e.label,value:e.value},{default:(0,t.w5)((()=>[(0,t._)("span",n,(0,o.zw)(e.label),1),(0,t._)("span",r,"【"+(0,o.zw)(e.tableComment)+"】",1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"客户端ID",prop:"clientId"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(v),"onUpdate:modelValue":N[4]||(N[4]=e=>(0,u.dq)(v)?v.value=e:null),placeholder:"客户端ID",filterable:"",onChange:N[5]||(N[5]=e=>(e=>{VE_API.system.clientJavaPathList({clientId:e}).then((e=>{0===e.code&&e.data&&(e.data.map((e=>{e.label=e.absolutePath,e.value=e.absolutePath})),k.value=e.data?e.data:[])}))})(e))},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(A.value,(e=>((0,t.wg)(),(0,t.j4)(P,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"文件地址",prop:"absolutePath"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(h),"onUpdate:modelValue":N[6]||(N[6]=e=>(0,u.dq)(h)?h.value=e:null),placeholder:"文件地址(到当前项目、模块就可以了)",filterable:"",clearable:"","allow-create":""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.value,(e=>((0,t.wg)(),(0,t.j4)(P,{key:e.value,label:e.absolutePath,value:e.absolutePath},{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(L,{span:12},{default:(0,t.w5)((()=>[(0,t._)("span",m,(0,o.zw)(e.absolutePath),1)])),_:2},1024),(0,t.Wm)(L,{span:12},{default:(0,t.w5)((()=>[(0,t._)("span",i," 使用的数据库 "+(0,o.zw)(e.schemaName),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"文件前缀",prop:"prefix"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{modelValue:(0,u.SU)(w),"onUpdate:modelValue":N[7]||(N[7]=e=>(0,u.dq)(w)?w.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"架构",prop:"webArchitecture"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(g),"onUpdate:modelValue":N[8]||(N[8]=e=>(0,u.dq)(g)?g.value=e:null),placeholder:"架构",filterable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{label:"DDD",value:"DDD_ARCHITECTURE"}),(0,t.Wm)(P,{label:"WEB_MVC",value:"WEB_MVC"}),(0,t.Wm)(P,{label:"FEIGN",value:"FEIGN_API"})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"ORM",prop:"ormArchitecture"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(_),"onUpdate:modelValue":N[9]||(N[9]=e=>(0,u.dq)(_)?_.value=e:null),placeholder:"ORM",filterable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{label:"MYBATIS",value:"MYBATIS"}),(0,t.Wm)(P,{label:"LAZY",value:"LAZY"})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"包名称",prop:"packageName"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:(0,u.SU)(V),"onUpdate:modelValue":N[10]||(N[10]=e=>(0,u.dq)(V)?V.value=e:null),placeholder:"com.alimama.demo",filterable:"",clearable:"","allow-create":""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.value,(e=>((0,t.wg)(),(0,t.j4)(P,{key:e.value,label:e.packageName,value:e.packageName},{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(L,{span:12},{default:(0,t.w5)((()=>[(0,t._)("span",s,(0,o.zw)(e.packageName),1)])),_:2},1024),(0,t.Wm)(L,{span:12},{default:(0,t.w5)((()=>[(0,t._)("span",c," 使用的数据库 "+(0,o.zw)(e.schemaName),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,t._)("span",null,[(0,t.Wm)(z,{type:"primary",onClick:N[11]||(N[11]=e=>{a.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;console.log(d),e=VE_API.system.clientGenerateLocalJava({instanceId:d.instanceId,schemaName:d.schema,tableList:d.tableList,absolutePath:d.absolutePath,packageName:d.packageName,webArchitecture:d.webArchitecture,prefix:d.prefix,ormArchitecture:d.ormArchitecture,clientId:d.clientId});const{code:l}=e;0===l&&console.log(e)}}))})},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1})])])}}})}}]);