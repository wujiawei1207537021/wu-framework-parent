"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[9514],{19514:function(e,a,l){l.r(a),l.d(a,{default:function(){return k}});var t=l(66252),s=l(3577),u=l(2262);const c=e=>((0,t.dD)("data-v-56a11c7a"),e=e(),(0,t.Cn)(),e),n={class:"ve-card ve_card2"},r=c((()=>(0,t._)("p",null,"用户数量",-1))),o={class:"ve-card ve_card1"},p=c((()=>(0,t._)("p",null,"数据库实例数量",-1))),m={class:"percentage-value"},d=c((()=>(0,t._)("span",{class:"percentage-label"},"JVM内存使用",-1))),v={class:"percentage-label"},_={class:"percentage-value"},w=c((()=>(0,t._)("span",{class:"percentage-label"},"当前线程CPU使用",-1))),i={class:"percentage-label"},y={class:"percentage-value"},g=c((()=>(0,t._)("span",{class:"percentage-label"},"当前系统CPU使用",-1))),f={class:"percentage-label"},M={class:"percentage-value"},h={class:"percentage-value"},b={class:"percentage-value"},C={class:"percentage-value"};var W={__name:"Shortcuts",setup(e){const a=(0,u.iH)({menuNum:0,roleNum:0,userNum:0,instanceNum:0,schemaNum:0,tableNum:0,tableColumnNum:0,maxMemory:0,totalMemory:1,freeMemory:0,useMemory:0}),l=(0,u.iH)({cpuNum:"0",total:"0",sys:"0.00",used:"0.00",wait:"0.00",free:"0.00",name:"",arch:"",version:""}),c=[{color:"#f56c6c",percentage:100},{color:"#e6a23c",percentage:80},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:40},{color:"#6f7ad3",percentage:20}],W=(0,u.iH)(),k=async()=>{const{code:e,data:l}=await VE_API.system.jvmRunTimeMemory();0===e&&(console.log(l),a.value.maxMemory=l.maxMemory,a.value.totalMemory=l.totalMemory,a.value.freeMemory=l.freeMemory,a.value.useMemory=l.useMemory)},N=async()=>{const{code:e,data:a}=await VE_API.system.jvmCPU();0===e&&(l.value=a,console.log(a))};return(0,t.bv)((async()=>{const{code:e,data:l}=await VE_API.system.shortcutsData();0===e&&(console.log(l),a.value=l),await k(),await N(),W.value=setTimeout((()=>{k(),N()}),3e3)})),(0,t.Ah)((()=>{clearTimeout(W.value),W.value=""})),(e,u)=>{const W=(0,t.up)("user"),z=(0,t.up)("el-icon"),P=(0,t.up)("el-col"),U=(0,t.up)("grape"),x=(0,t.up)("el-button"),A=(0,t.up)("el-progress"),I=(0,t.up)("el-card"),V=(0,t.up)("el-row");return(0,t.wg)(),(0,t.j4)(V,{gutter:20,style:{"padding-bottom":"10px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{span:12},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W)])),_:1}),(0,t._)("div",null,[r,(0,t._)("span",null,(0,s.zw)(a.value.userNum),1)])])])),_:1}),(0,t.Wm)(P,{span:12},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U)])),_:1}),(0,t._)("div",null,[p,(0,t._)("span",null,(0,s.zw)(a.value.instanceNum),1)])])])),_:1}),(0,t.Wm)(P,{style:{padding:"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{shadow:"always",class:"box-card",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{type:"circle",width:140,"stroke-width":15,color:c,percentage:100*Number(a.value.useMemory/a.value.totalMemory)},{default:(0,t.w5)((()=>[(0,t._)("span",m,(0,s.zw)(a.value.useMemory+"/"+a.value.totalMemory)+"MB",1),d,(0,t._)("span",v,[(0,t.Wm)(x,{onClick:u[0]||(u[0]=e=>(async()=>{const{code:e,data:a}=await VE_API.system.jvmGC();0===e&&(console.log(a),await k())})())},{default:(0,t.w5)((()=>[(0,t.Uk)("GC")])),_:1})])])),_:1},8,["percentage"]),(0,t.Wm)(A,{type:"circle",width:140,"stroke-width":15,color:c,percentage:l.value.used},{default:(0,t.w5)((()=>[(0,t._)("span",_,(0,s.zw)(l.value.used)+"%",1),w,(0,t._)("span",i,[(0,t.Wm)(x,{onClick:u[1]||(u[1]=e=>N())},{default:(0,t.w5)((()=>[(0,t.Uk)("cpu")])),_:1})])])),_:1},8,["percentage"]),(0,t.Wm)(A,{type:"circle",width:140,"stroke-width":15,color:c,percentage:l.value.sys},{default:(0,t.w5)((()=>[(0,t._)("span",y,(0,s.zw)(l.value.sys)+"%",1),g,(0,t._)("span",f,[(0,t.Wm)(x,{onClick:u[2]||(u[2]=e=>N())},{default:(0,t.w5)((()=>[(0,t.Uk)("cpu")])),_:1})])])),_:1},8,["percentage"]),(0,t.Wm)(A,null,{default:(0,t.w5)((()=>[(0,t._)("span",M,"CUP名称: "+(0,s.zw)(l.value.name),1),(0,t._)("span",h,"CUP架构: "+(0,s.zw)(l.value.arch),1),(0,t._)("span",b,"CUP版本: "+(0,s.zw)(l.value.version),1),(0,t._)("span",C,"CUP核心数: "+(0,s.zw)(l.value.cpuNum)+"核",1)])),_:1})])),_:1})])),_:1})])),_:1})}}};var k=(0,l(48118).Z)(W,[["__scopeId","data-v-56a11c7a"]])}}]);