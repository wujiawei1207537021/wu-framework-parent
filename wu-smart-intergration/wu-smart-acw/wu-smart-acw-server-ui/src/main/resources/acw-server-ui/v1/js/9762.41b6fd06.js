"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[9762,289],{29864:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});l(70560);var s=l(66252),t=l(2262),u=l(49963),d=l(32393),r=l(85729),o=l(33907),n=l(22201);const i={class:"ve_container"},p=(e=>((0,s.dD)("data-v-596ed213"),e=e(),(0,s.Cn)(),e))((()=>(0,s._)("h1",null,"Lazy-UI",-1)));var m={__name:"Login",setup(e){const a={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},l=(0,o.oR)(),m=(0,n.tv)(),c=(0,t.qj)({username:"",password:""}),{username:f,password:w}=(0,t.BK)(c),_=(0,t.iH)(null),y=(0,t.iH)(!1);sessionStorage.clear(),l.dispatch(`app/${d.L4}`,""),m.options.isAddDynamicMenuRoutes=!1;const v=()=>{_.value.validate((async e=>{if(e){const e=await VE_API.system.login(c);if(0===e.code){await l.dispatch(`app/${d.L4}`,e.data),await l.dispatch(`app/${d.Wy}`,e.data.accessToken),await l.dispatch(`app/${d.aR}`,e.data.refreshToken),await l.dispatch(`app/${d.TR}`,c.username);const a=await VE_API.system.resolvingUser({accessToken:e.data.accessToken});console.log(a),a&&a.id&&await l.dispatch(`app/${d.mg}`,a.id),y.value=!0,m.push({name:"AppMain"})}}}))};return(e,l)=>{const d=(0,s.up)("router-link"),o=(0,s.up)("Avatar"),n=(0,s.up)("el-icon"),m=(0,s.up)("el-input"),g=(0,s.up)("el-form-item"),h=(0,s.up)("Key"),W=(0,s.up)("el-button"),k=(0,s.up)("el-form"),b=(0,s.up)("el-card");return(0,s.wg)(),(0,s.j4)((0,t.SU)(r.default),null,{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s.Wm)(b,{"body-style":{background:"rgba(0,0,0,0.15)"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{float:"right"},to:{path:"register"}},{default:(0,s.w5)((()=>[(0,s.Uk)("注册")])),_:1}),p,(0,s.Wm)(u.uT,{name:"el-fade-in-linear"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(k,{model:c,rules:a,class:"ve_form",ref_key:"ref_form",ref:_,inline:!1,onKeyup:(0,u.D2)(v,["enter"])},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{prop:"username"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:(0,t.SU)(f),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,t.dq)(f)?f.value=e:null),modelModifiers:{trim:!0},placeholder:"用户名"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{size:20},{default:(0,s.w5)((()=>[(0,s.Wm)(o)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(g,{prop:"password"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:(0,t.SU)(w),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,t.dq)(w)?w.value=e:null),modelModifiers:{trim:!0},"show-password":"",placeholder:"密码"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{size:20},{default:(0,s.w5)((()=>[(0,s.Wm)(h)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"ve_submit",type:"primary",onClick:v},{default:(0,s.w5)((()=>[(0,s.Uk)(" 登录 ")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"]),[[u.F8,!y.value]])])),_:1})])),_:1},8,["body-style"])])])),_:1})}}};var c=(0,l(48118).Z)(m,[["__scopeId","data-v-596ed213"]])}}]);