"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[6768],{6768:function(e,l,a){a.r(l),a.d(l,{default:function(){return o}});var u=a(66252),t=a(2262);var o={__name:"UsersEdit",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:l}){const a={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleIds:[{required:!0,message:"请选择角色",trigger:"change"}]},o=e,d=l,{title:r,rowData:s}=(0,t.BK)(o),n=()=>{d("closeDialog",!1)},i=(0,t.iH)(null),m=(0,t.qj)({username:"",password:"",roleIds:[],status:!0}),{username:p,password:w,roleIds:c,status:f}=(0,t.BK)(m),v=(0,t.iH)([]);s.value&&(p.value=s.value.username,w.value=s.value.password,c.value=s.value.roleIds,f.value=s.value.status);(0,u.bv)((async()=>{await(async()=>{const{code:e,data:l}=await VE_API.system.roleList();0===e&&(v.value=l)})()}));return(l,o)=>{const d=(0,u.up)("el-input"),b=(0,u.up)("el-form-item"),g=(0,u.up)("el-option"),_=(0,u.up)("el-select"),y=(0,u.up)("el-radio-button"),V=(0,u.up)("el-radio-group"),U=(0,u.up)("el-form"),W=(0,u.up)("el-button"),h=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(h,{title:(0,t.SU)(r),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:o[6]||(o[6]=e=>n())},{footer:(0,u.w5)((()=>[(0,u._)("span",null,[(0,u.Wm)(W,{onClick:o[4]||(o[4]=e=>n())},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1}),(0,u.Wm)(W,{type:"primary",onClick:o[5]||(o[5]=e=>{i.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;e="添加"===r.value?await VE_API.system.userAdd(m):await VE_API.system.userEdit({id:s.value.id,...m});const{code:l}=e;0===l&&n()}}))})},{default:(0,u.w5)((()=>[(0,u.Uk)("确定")])),_:1})])])),default:(0,u.w5)((()=>[(0,u.Wm)(U,{model:m,ref_key:"formRef",ref:i,rules:a,"label-width":"80px",inline:!1},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"用户名",prop:"username"},{default:(0,u.w5)((()=>[(0,u.Wm)(d,{modelValue:(0,t.SU)(p),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,t.dq)(p)?p.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(b,{label:"密码",prop:"password"},{default:(0,u.w5)((()=>[(0,u.Wm)(d,{modelValue:(0,t.SU)(w),"onUpdate:modelValue":o[1]||(o[1]=e=>(0,t.dq)(w)?w.value=e:null),"show-password":"",placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(b,{label:"角色",prop:"roleIds"},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{style:{width:"100%"},modelValue:(0,t.SU)(c),"onUpdate:modelValue":o[2]||(o[2]=e=>(0,t.dq)(c)?c.value=e:null),multiple:"",placeholder:"",clearable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(v.value,(e=>((0,u.wg)(),(0,u.j4)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(b,{label:"状态"},{default:(0,u.w5)((()=>[(0,u.Wm)(V,{modelValue:(0,t.SU)(f),"onUpdate:modelValue":o[3]||(o[3]=e=>(0,t.dq)(f)?f.value=e:null)},{default:(0,u.w5)((()=>[(0,u.Wm)(y,{label:!0},{default:(0,u.w5)((()=>[(0,u.Uk)("启用")])),_:1}),(0,u.Wm)(y,{label:!1},{default:(0,u.w5)((()=>[(0,u.Uk)("停用")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}}}}]);