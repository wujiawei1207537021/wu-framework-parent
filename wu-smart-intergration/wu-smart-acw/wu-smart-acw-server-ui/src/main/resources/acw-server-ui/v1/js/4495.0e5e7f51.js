"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[4495],{74495:function(e,l,a){a.r(l),a.d(l,{default:function(){return n}});var t=a(66252),u=a(2262);var n={__name:"DatabaseInstanceBackUpsAdd",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:l}){const a={instanceId:[{required:!0,message:"请选择数据库实例",trigger:"blur"}]},n=e,o=l,{title:s,rowData:i}=(0,u.BK)(n),d=()=>{o("closeDialog",!1)},r=(0,u.iH)(null),c=(0,u.iH)(null),p=(0,u.qj)({instanceId:""}),{instanceId:m}=(0,u.BK)(p);i.value&&(m.value=i.value.instanceId);return(0,t.bv)((async()=>{await(async()=>{VE_API.system.databaseInstanceList().then((e=>(e.data.map((e=>{e.label=e.instanceName,e.value=e.id})),c.value=e.data?e.data:[],c.value)))})()})),(l,n)=>{const o=(0,t.up)("el-option"),i=(0,t.up)("el-select"),f=(0,t.up)("el-form-item"),v=(0,t.up)("el-form"),w=(0,t.up)("el-button"),b=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(b,{title:(0,u.SU)(s),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:n[3]||(n[3]=e=>d())},{footer:(0,t.w5)((()=>[(0,t._)("span",null,[(0,t.Wm)(w,{onClick:n[1]||(n[1]=e=>d())},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(w,{type:"primary",onClick:n[2]||(n[2]=e=>{r.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;e=await VE_API.system.databaseInstanceBackUp({instanceId:m.value});const{code:l}=e;0===l&&d()}}))})},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(v,{model:p,ref_key:"formRef",ref:r,rules:a,"label-width":"120px",inline:!1},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{label:"数据库实例",prop:"instanceId"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:(0,u.SU)(m),"onUpdate:modelValue":n[0]||(n[0]=e=>(0,u.dq)(m)?m.value=e:null),placeholder:"数据库实例",filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(c.value,(e=>((0,t.wg)(),(0,t.j4)(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}}}}]);