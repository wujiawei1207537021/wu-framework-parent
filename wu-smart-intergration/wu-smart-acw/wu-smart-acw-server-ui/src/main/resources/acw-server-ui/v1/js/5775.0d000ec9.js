"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[5775],{65775:function(e,l,a){a.r(l),a.d(l,{default:function(){return o}});var t=a(66252),u=a(2262);var o={__name:"RedisInstanceEdit",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:l}){const a={instanceName:[{required:!0,message:"请输入服务器名称",trigger:"blur"}],username:[{required:!0,message:"请输入账户",trigger:"blur"}],host:[{required:!0,message:"host不能为空",trigger:"change"}],port:[{required:!0,message:"端口不能为空",trigger:"change"}],driverClassName:[{required:!0,message:"driverClassName",trigger:"change"}]},o=e,r=l,{title:s,rowData:d}=(0,u.BK)(o),n=()=>{r("closeDialog",!1)},m=(0,u.iH)(null),i=(0,u.qj)({instanceName:"",username:"root",password:"",host:"127.0.0.1",port:6379,status:"",sort:1}),{instanceName:p,username:c,password:v,host:f,port:w,status:g,sort:V}=(0,u.BK)(i);d.value&&(p.value=d.value.instanceName,c.value=d.value.username,v.value=d.value.password,f.value=d.value.host,w.value=d.value.port,g.value=d.value.status,V.value=d.value.sort);return(l,o)=>{const r=(0,t.up)("el-input"),b=(0,t.up)("el-form-item"),h=(0,t.up)("el-form"),_=(0,t.up)("el-button"),y=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(y,{title:(0,u.SU)(s),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:o[10]||(o[10]=e=>n())},{footer:(0,t.w5)((()=>[(0,t._)("span",null,[(0,t.Wm)(_,{style:{float:"left"},onClick:o[7]||(o[7]=e=>(async()=>{let e=await VE_API.system.redisInstanceTest(i);const{code:l}=e;0===l&&console.log("连接成功")})())},{default:(0,t.w5)((()=>[(0,t.Uk)("测试连接")])),_:1}),(0,t.Wm)(_,{onClick:o[8]||(o[8]=e=>n())},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(_,{type:"primary",onClick:o[9]||(o[9]=e=>{m.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;e="添加Redis实例"===s.value?await VE_API.system.redisInstanceStory(i):await VE_API.system.redisInstanceStory({id:d.value.id,...i});const{code:l}=e;0===l&&n()}}))})},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(h,{model:i,ref_key:"formRef",ref:m,rules:a,"label-width":"120px",inline:!1},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"服务器名称",prop:"instanceName"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,u.SU)(p),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,u.dq)(p)?p.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"用户名",prop:"username"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,u.SU)(c),"onUpdate:modelValue":o[1]||(o[1]=e=>(0,u.dq)(c)?c.value=e:null),placeholder:"root",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"密码",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,u.SU)(v),"onUpdate:modelValue":o[2]||(o[2]=e=>(0,u.dq)(v)?v.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"host",prop:"host"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,u.SU)(f),"onUpdate:modelValue":o[3]||(o[3]=e=>(0,u.dq)(f)?f.value=e:null),placeholder:"127.0.0.1",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"端口",prop:"port"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,u.SU)(w),"onUpdate:modelValue":o[4]||(o[4]=e=>(0,u.dq)(w)?w.value=e:null),placeholder:"6379",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"状态",prop:"status"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,u.SU)(g),"onUpdate:modelValue":o[5]||(o[5]=e=>(0,u.dq)(g)?g.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"排序",prop:"sort"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,u.SU)(V),"onUpdate:modelValue":o[6]||(o[6]=e=>(0,u.dq)(V)?V.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}}}}]);