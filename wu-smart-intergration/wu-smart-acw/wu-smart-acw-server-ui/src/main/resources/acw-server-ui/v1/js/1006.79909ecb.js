"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[1006],{11006:function(e,l,a){a.r(l),a.d(l,{default:function(){return p}});var t=a(66252),u=a(2262);const d={style:{padding:"10px 0"}},o=(0,t._)("p",{style:{"margin-top":"10px","font-size":"14px"}}," 点击或拖拽文件至此即可上传文件 ",-1),n=(0,t._)("p",{style:{"margin-top":"20px","font-size":"14px",color:"red"}}," 请上传10GB以内的待测对象 ",-1);var p={__name:"FileEdit",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:l}){const a={name:[{required:!0,message:"请输入文件名称",trigger:"blur"}],data:[{required:!0,message:"请上传文件",trigger:"blur"}],type:[{required:!0,message:"请选择文件类型",trigger:"blur"}]},p=e,r=l,{title:i,rowData:m}=(0,u.BK)(p),s=()=>{r("closeDialog",!1)},c=(0,u.iH)(null),f=(0,u.qj)({name:"",uid:"",data:[],describe:"",type:"",length:0}),{name:g,uid:v,data:y,describe:b,type:w,length:h}=(0,u.BK)(f);m.value&&(g.value=m.value.name,v.value=m.value.uid,y.value=m.value.data,b.value=m.value.describe,h.value=m.value.length,w.value=m.value.type),(0,t.bv)((async()=>{console.log("123")}));const _=e=>{var l=e.name,a=e.size;if(f.name=l,f.uid=e.uid,null!=a&&(f.length=(e=>{if(e<1024)return e+"B";if(e<1048576){let l=e/1024;return l=l.toFixed(2),l+"KB"}if(e<1073741824){let l=e/1048576;return l=l.toFixed(2),l+"MB"}{let l=e/1073741824;return l=l.toFixed(2),l+"GB"}})(a)),f.data=e.raw,null!==l){var t=l.split(".");f.type=t[t.length-1]}};return(l,p)=>{const r=(0,t.up)("Icon"),v=(0,t.up)("el-upload"),V=(0,t.up)("el-form-item"),W=(0,t.up)("el-input"),U=(0,t.up)("el-form"),k=(0,t.up)("el-button"),q=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(q,{title:(0,u.SU)(i),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:p[7]||(p[7]=e=>s())},{footer:(0,t.w5)((()=>[(0,t._)("span",null,[(0,t.Wm)(k,{onClick:p[5]||(p[5]=e=>s())},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(k,{type:"primary",onClick:p[6]||(p[6]=e=>{c.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e,l=new FormData;l.append("data",f.data),l.append("name",f.name),l.append("describe",f.describe),l.append("type",f.type),l.append("length",f.length),l.append("uid",f.uid),e="添加"===i.value?await VE_API.system.playFileAdd(l):await VE_API.system.playFileEdit({id:m.value.id,...l});const{code:a}=e;0===a&&s()}}))})},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(U,{model:f,ref_key:"formRef",ref:c,rules:a,"label-width":"80px",inline:!1},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:"文件数据",prop:"data"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{name:"data",multiple:!1,"show-file-list":!0,"on-change":_,limit:"1",modelValue:(0,u.SU)(y),"onUpdate:modelValue":p[0]||(p[0]=e=>(0,u.dq)(y)?y.value=e:null),placeholder:"",clearable:"","auto-upload":!1},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(r,{type:"ios-cloud-upload",size:"52",style:{}}),o,n])])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(V,{label:"文件名称",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:(0,u.SU)(g),"onUpdate:modelValue":p[1]||(p[1]=e=>(0,u.dq)(g)?g.value=e:null),placeholder:"文件名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(V,{label:"描述",prop:"describe"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:(0,u.SU)(b),"onUpdate:modelValue":p[2]||(p[2]=e=>(0,u.dq)(b)?b.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(V,{label:"文件类型",prop:"type"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:(0,u.SU)(w),"onUpdate:modelValue":p[3]||(p[3]=e=>(0,u.dq)(w)?w.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(V,{label:"大小",prop:"length"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:(0,u.SU)(h),"onUpdate:modelValue":p[4]||(p[4]=e=>(0,u.dq)(h)?h.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}}}}]);