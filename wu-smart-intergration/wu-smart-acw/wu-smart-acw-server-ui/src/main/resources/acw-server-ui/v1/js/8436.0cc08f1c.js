"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[8436],{88436:function(e,l,a){a.r(l),a.d(l,{default:function(){return m}});var u=a(66252),t=a(2262);var m={__name:"DatabaseSchemaEdit",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:l}){const a={schemaName:[{required:!0,message:"请输入数据库库名",trigger:"blur"}],instanceId:[{required:!0,message:"请输入数据库服务器",trigger:"blur"}],characterSet:[{required:!0,message:"请输入字符集",trigger:"blur"}],sortingRules:[{required:!1,message:"请输入排序规则",trigger:"blur"}],ext:[{required:!1,message:"ext",trigger:"change"}]},m=e,i=l,{title:o,rowData:r}=(0,t.BK)(m),c=()=>{i("closeDialog",!1)},d=(0,t.iH)(null),s=(0,t.qj)({schemaName:"",instanceId:"",ext:"",characterSet:"",sortingRules:"",initializeToLocal:""}),{schemaName:b,instanceId:n,ext:v,characterSet:p,sortingRules:W,initializeToLocal:g}=(0,t.BK)(s),f=(0,t.iH)(null);r.value&&(b.value=r.value.schemaName,n.value=r.value.instanceId,p.value=r.value.characterSet,W.value=r.value.sortingRules,v.value=r.value.ext,g.value=r.value.initializeToLocal),(0,u.bv)((async()=>{VE_API.system.databaseInstanceList().then((e=>{e.data.map((e=>{e.label=e.instanceName,e.value=e.id})),f.value=e.data?e.data:[]}))}));return(l,m)=>{const i=(0,u.up)("el-option"),h=(0,u.up)("el-select"),w=(0,u.up)("el-form-item"),k=(0,u.up)("el-input"),_=(0,u.up)("el-form"),V=(0,u.up)("el-button"),y=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(y,{title:(0,t.SU)(o),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:m[8]||(m[8]=e=>c())},{footer:(0,u.w5)((()=>[(0,u._)("span",null,[(0,u.Wm)(V,{onClick:m[6]||(m[6]=e=>c())},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1}),(0,u.Wm)(V,{type:"primary",onClick:m[7]||(m[7]=e=>{d.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;e="添加"==o.value?await VE_API.system.schemaAdd(s):await VE_API.system.schemaEdit({id:r.value.id,...s});const{code:l}=e;0===l&&c()}}))})},{default:(0,u.w5)((()=>[(0,u.Uk)("确定")])),_:1})])])),default:(0,u.w5)((()=>[(0,u.Wm)(_,{model:s,ref_key:"formRef",ref:d,rules:a,"label-width":"80px",inline:!1},{default:(0,u.w5)((()=>[(0,u.Wm)(w,{label:"数据库实例",prop:"instanceId"},{default:(0,u.w5)((()=>[(0,u.Wm)(h,{modelValue:(0,t.SU)(n),"onUpdate:modelValue":m[0]||(m[0]=e=>(0,t.dq)(n)?n.value=e:null),placeholder:"数据库实例"},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(f.value,(e=>((0,u.wg)(),(0,u.j4)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(w,{label:"数据库库名",prop:"schemaName"},{default:(0,u.w5)((()=>[(0,u.Wm)(k,{modelValue:(0,t.SU)(b),"onUpdate:modelValue":m[1]||(m[1]=e=>(0,t.dq)(b)?b.value=e:null),placeholder:"数据库库名",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(w,{label:"字符集",prop:"characterSet"},{default:(0,u.w5)((()=>[(0,u.Wm)(h,{modelValue:(0,t.SU)(p),"onUpdate:modelValue":m[2]||(m[2]=e=>(0,t.dq)(p)?p.value=e:null),placeholder:"字符集",filterable:""},{default:(0,u.w5)((()=>[(0,u.Wm)(i,{label:"armscii8",value:"armscii8"}),(0,u.Wm)(i,{label:"ascii",value:"ascii"}),(0,u.Wm)(i,{label:"big5",value:"big5"}),(0,u.Wm)(i,{label:"binary",value:"binary"}),(0,u.Wm)(i,{label:"cp850",value:"cp850"}),(0,u.Wm)(i,{label:"cp852",value:"cp852"}),(0,u.Wm)(i,{label:"cp866",value:"cp866"}),(0,u.Wm)(i,{label:"cp932",value:"cp932"}),(0,u.Wm)(i,{label:"cp1250",value:"cp1250"}),(0,u.Wm)(i,{label:"cp1251",value:"cp1251"}),(0,u.Wm)(i,{label:"cp1256",value:"cp1256"}),(0,u.Wm)(i,{label:"cp1257",value:"cp1257"}),(0,u.Wm)(i,{label:"dec8",value:"dec8"}),(0,u.Wm)(i,{label:"eucjpms",value:"eucjpms"}),(0,u.Wm)(i,{label:"euckr",value:"euckr"}),(0,u.Wm)(i,{label:"gb2312",value:"gb2312"}),(0,u.Wm)(i,{label:"gb18030",value:"gb18030"}),(0,u.Wm)(i,{label:"gbk",value:"gbk"}),(0,u.Wm)(i,{label:"geostd8",value:"geostd8"}),(0,u.Wm)(i,{label:"greek",value:"greek"}),(0,u.Wm)(i,{label:"hebrew",value:"hebrew"}),(0,u.Wm)(i,{label:"hp8",value:"hp8"}),(0,u.Wm)(i,{label:"keybcs2",value:"keybcs2"}),(0,u.Wm)(i,{label:"koi8r",value:"koi8r"}),(0,u.Wm)(i,{label:"koi8u",value:"koi8u"}),(0,u.Wm)(i,{label:"latin1",value:"latin1"}),(0,u.Wm)(i,{label:"latin2",value:"latin2"}),(0,u.Wm)(i,{label:"latin5",value:"latin5"}),(0,u.Wm)(i,{label:"latin7",value:"latin7"}),(0,u.Wm)(i,{label:"macce",value:"macce"}),(0,u.Wm)(i,{label:"macroman",value:"macroman"}),(0,u.Wm)(i,{label:"sjis",value:"sjis"}),(0,u.Wm)(i,{label:"swe7",value:"swe7"}),(0,u.Wm)(i,{label:"tis620",value:"tis620"}),(0,u.Wm)(i,{label:"ucs2",value:"ucs2"}),(0,u.Wm)(i,{label:"ujis",value:"ujis"}),(0,u.Wm)(i,{label:"utf8",value:"utf8"}),(0,u.Wm)(i,{label:"utf8mb4",value:"utf8mb4"}),(0,u.Wm)(i,{label:"utf16",value:"utf16"}),(0,u.Wm)(i,{label:"utf16le",value:"utf16le"}),(0,u.Wm)(i,{label:"utf32",value:"utf32"})])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(w,{label:"排序规则",prop:"sortingRules"},{default:(0,u.w5)((()=>[(0,u.Wm)(k,{modelValue:(0,t.SU)(W),"onUpdate:modelValue":m[3]||(m[3]=e=>(0,t.dq)(W)?W.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(w,{label:"ext",prop:"ext"},{default:(0,u.w5)((()=>[(0,u.Wm)(k,{modelValue:(0,t.SU)(v),"onUpdate:modelValue":m[4]||(m[4]=e=>(0,t.dq)(v)?v.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(w,{label:"是否初始化数据库到本地",prop:"initializeToLocal"},{default:(0,u.w5)((()=>[(0,u.Wm)(h,{modelValue:(0,t.SU)(g),"onUpdate:modelValue":m[5]||(m[5]=e=>(0,t.dq)(g)?g.value=e:null),placeholder:"是否初始化数据库到本地",clearable:""},{default:(0,u.w5)((()=>[(0,u.Wm)(i,{label:"初始化数据库到本地",value:!0}),(0,u.Wm)(i,{label:"不初始化数据库到本地",value:!1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}}}}]);