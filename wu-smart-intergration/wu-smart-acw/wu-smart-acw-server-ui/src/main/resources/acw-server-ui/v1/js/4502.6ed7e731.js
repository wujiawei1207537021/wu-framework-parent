"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[4502],{74502:function(e,l,a){a.r(l),a.d(l,{default:function(){return o}});var u=a(66252),r=a(2262);var o={__name:"ProjectEdit",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:l}){const a={projectName:[{required:!0,message:"请输入服务器名称",trigger:"blur"}],instanceId:[{required:!0,message:"请选择数据库服务器",trigger:"blur"}],version:[{required:!0,message:"请输入项目版本",trigger:"blur"}],ormFrameEnums:[{required:!0,message:"请选择ORM框架",trigger:"change"}],owner:[{required:!0,message:"请输入项目拥有者",trigger:"change"}],uiFrameEnums:[{required:!0,message:"请输入项目UI框架",trigger:"change"}]},o=e,t=l,{title:m,rowData:n}=(0,r.BK)(o),d=()=>{t("closeDialog",!1)},i=(0,r.iH)(null),s=(0,r.qj)({projectName:"",instanceId:"",version:"",ormFrameEnums:"",uiFrameEnums:"",owner:""}),{projectName:p,instanceId:c,version:v,ormFrameEnums:b,uiFrameEnums:w,owner:g}=(0,r.BK)(s),f=(0,r.iH)(null);n.value&&(p.value=n.value.projectName,c.value=n.value.instanceId,v.value=n.value.version,b.value=n.value.ormFrameEnums,g.value=n.value.owner,w.value=n.value.uiFrameEnums),(0,u.bv)((async()=>{let e=await VE_API.system.databaseInstanceList();e.data.map((l=>{l.label=l.instanceName,l.value=l.id,f.value=e.data?e.data:[]}))}));return(l,o)=>{const t=(0,u.up)("el-input"),V=(0,u.up)("el-form-item"),_=(0,u.up)("el-option"),U=(0,u.up)("el-select"),W=(0,u.up)("el-form"),y=(0,u.up)("el-button"),E=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(E,{title:(0,r.SU)(m),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:o[8]||(o[8]=e=>d())},{footer:(0,u.w5)((()=>[(0,u._)("span",null,[(0,u.Wm)(y,{onClick:o[6]||(o[6]=e=>d())},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1}),(0,u.Wm)(y,{type:"primary",onClick:o[7]||(o[7]=e=>{i.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;e="添加"==m.value?await VE_API.system.projectAdd(s):await VE_API.system.projectEdit({id:n.value.id,...s});const{code:l}=e;"00"==l&&d()}}))})},{default:(0,u.w5)((()=>[(0,u.Uk)("确定")])),_:1})])])),default:(0,u.w5)((()=>[(0,u.Wm)(W,{model:s,ref_key:"formRef",ref:i,rules:a,"label-width":"80px",inline:!1},{default:(0,u.w5)((()=>[(0,u.Wm)(V,{label:"项目名称",prop:"projectName"},{default:(0,u.w5)((()=>[(0,u.Wm)(t,{modelValue:(0,r.SU)(p),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,r.dq)(p)?p.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(V,{label:"数据库实例",prop:"instanceId"},{default:(0,u.w5)((()=>[(0,u.Wm)(U,{modelValue:(0,r.SU)(c),"onUpdate:modelValue":o[1]||(o[1]=e=>(0,r.dq)(c)?c.value=e:null),placeholder:"数据库实例",clearable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(f.value,(e=>((0,u.wg)(),(0,u.j4)(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(V,{label:"项目拥有者",prop:"owner"},{default:(0,u.w5)((()=>[(0,u.Wm)(t,{modelValue:(0,r.SU)(g),"onUpdate:modelValue":o[2]||(o[2]=e=>(0,r.dq)(g)?g.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(V,{label:"项目版本",prop:"version"},{default:(0,u.w5)((()=>[(0,u.Wm)(t,{modelValue:(0,r.SU)(v),"onUpdate:modelValue":o[3]||(o[3]=e=>(0,r.dq)(v)?v.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(V,{label:"ORM框架",prop:"ormFrameEnums"},{default:(0,u.w5)((()=>[(0,u.Wm)(U,{modelValue:(0,r.SU)(b),"onUpdate:modelValue":o[4]||(o[4]=e=>(0,r.dq)(b)?b.value=e:null),placeholder:"ORM框架",clearable:""},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{label:"Lazy",value:"UPSERT"}),(0,u.Wm)(_,{label:"mybatis",value:"MYBATIS"}),(0,u.Wm)(_,{label:"JPA",value:"JPA"})])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(V,{label:"UI框架",prop:"uiFrameEnums"},{default:(0,u.w5)((()=>[(0,u.Wm)(U,{modelValue:(0,r.SU)(w),"onUpdate:modelValue":o[5]||(o[5]=e=>(0,r.dq)(w)?w.value=e:null),placeholder:"UI框架",clearable:""},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{label:"VUE",value:"VUE"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}}}}]);