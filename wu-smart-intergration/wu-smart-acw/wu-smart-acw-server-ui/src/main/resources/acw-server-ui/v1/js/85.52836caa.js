"use strict";(self.webpackChunklazy_ui=self.webpackChunklazy_ui||[]).push([[85],{90085:function(e,l,a){a.r(l),a.d(l,{default:function(){return t}});var u=a(66252),o=a(2262);var t={__name:"DatabaseInstanceEdit",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup(e,{emit:l}){const a={instanceName:[{required:!0,message:"请输入服务器名称",trigger:"blur"}],username:[{required:!0,message:"请输入账户",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],host:[{required:!0,message:"host不能为空",trigger:"change"}],port:[{required:!0,message:"端口不能为空",trigger:"change"}],driverClassName:[{required:!0,message:"driverClassName",trigger:"change"}]},t=e,r=l,{title:d,rowData:s}=(0,o.BK)(t),m=()=>{r("closeDialog",!1)},n=(0,o.iH)(null),i=(0,o.qj)({instanceName:"",driverClassName:"com.mysql.cj.jdbc.Driver",username:"root",password:"",host:"127.0.0.1",port:3306,status:"",lazyDataSourceType:"MySQL",sort:1,initializeToLocal:!1}),{instanceName:p,driverClassName:c,username:v,password:b,host:f,port:w,status:V,lazyDataSourceType:g,sort:W,initializeToLocal:y}=(0,o.BK)(i);s.value&&(p.value=s.value.instanceName,v.value=s.value.username,b.value=s.value.password,c.value=s.value.driverClassName,f.value=s.value.host,w.value=s.value.port,V.value=s.value.status,g.value=s.value.lazyDataSourceType,W.value=s.value.sort,y.value=s.value.initializeToLocal);return(l,t)=>{const r=(0,u.up)("el-input"),_=(0,u.up)("el-form-item"),h=(0,u.up)("el-option"),U=(0,u.up)("el-select"),S=(0,u.up)("el-form"),q=(0,u.up)("el-button"),C=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(C,{title:(0,o.SU)(d),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:t[13]||(t[13]=e=>m())},{footer:(0,u.w5)((()=>[(0,u._)("span",null,[(0,u.Wm)(q,{style:{float:"left"},onClick:t[10]||(t[10]=e=>(async()=>{let e=await VE_API.system.databaseInstanceTest(i);const{code:l}=e;0===l&&console.log("连接成功")})())},{default:(0,u.w5)((()=>[(0,u.Uk)("测试连接")])),_:1}),(0,u.Wm)(q,{onClick:t[11]||(t[11]=e=>m())},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1}),(0,u.Wm)(q,{type:"primary",onClick:t[12]||(t[12]=e=>{n.value.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{let e;e="添加"===d.value?await VE_API.system.databaseInstanceAdd(i):await VE_API.system.databaseInstanceEdit({id:s.value.id,...i});const{code:l}=e;0===l&&m()}}))})},{default:(0,u.w5)((()=>[(0,u.Uk)("确定")])),_:1})])])),default:(0,u.w5)((()=>[(0,u.Wm)(S,{model:i,ref_key:"formRef",ref:n,rules:a,"label-width":"120px",inline:!1},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{label:"服务器名称",prop:"instanceName"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(p),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.dq)(p)?p.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"用户名",prop:"username"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(v),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.dq)(v)?v.value=e:null),placeholder:"root",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"密码",prop:"password"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(b),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.dq)(b)?b.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"host",prop:"host"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(f),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,o.dq)(f)?f.value=e:null),placeholder:"127.0.0.1",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"端口",prop:"port"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(w),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,o.dq)(w)?w.value=e:null),placeholder:"3306",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"驱动程序类名",prop:"driverClassName"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(c),"onUpdate:modelValue":t[5]||(t[5]=e=>(0,o.dq)(c)?c.value=e:null),placeholder:"com.mysql.cj.jdbc.Driver",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"状态",prop:"status"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(V),"onUpdate:modelValue":t[6]||(t[6]=e=>(0,o.dq)(V)?V.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"数据源类型",prop:"lazyDataSourceType"},{default:(0,u.w5)((()=>[(0,u.Wm)(U,{modelValue:(0,o.SU)(g),"onUpdate:modelValue":t[7]||(t[7]=e=>(0,o.dq)(g)?g.value=e:null),placeholder:"数据源类型",clearable:""},{default:(0,u.w5)((()=>[(0,u.Wm)(h,{label:"MySQL",value:"MySQL"}),(0,u.Wm)(h,{label:"H2",value:"H2"}),(0,u.Wm)(h,{label:"CLICK_HOUSE",value:"CLICK_HOUSE"}),(0,u.Wm)(h,{label:"POSTGRESQL",value:"POSTGRESQL"})])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"排序",prop:"sort"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,o.SU)(W),"onUpdate:modelValue":t[8]||(t[8]=e=>(0,o.dq)(W)?W.value=e:null),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"是否初始化数据库到本地",prop:"initializeToLocal"},{default:(0,u.w5)((()=>[(0,u.Wm)(U,{modelValue:(0,o.SU)(y),"onUpdate:modelValue":t[9]||(t[9]=e=>(0,o.dq)(y)?y.value=e:null),placeholder:"是否初始化数据库到本地",clearable:""},{default:(0,u.w5)((()=>[(0,u.Wm)(h,{label:"初始化数据库到本地",value:!0}),(0,u.Wm)(h,{label:"不初始化数据库到本地",value:!1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}}}}]);